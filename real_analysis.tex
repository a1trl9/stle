% Options for packages loaded elsewhere
\PassOptionsToPackage{unicode}{hyperref}
\PassOptionsToPackage{hyphens}{url}
%
\documentclass[
]{article}
\usepackage{lmodern}
\usepackage{amssymb,amsmath}
\usepackage{ifxetex,ifluatex}
\ifnum 0\ifxetex 1\fi\ifluatex 1\fi=0 % if pdftex
  \usepackage[T1]{fontenc}
  \usepackage[utf8]{inputenc}
  \usepackage{textcomp} % provide euro and other symbols
\else % if luatex or xetex
  \usepackage{unicode-math}
  \defaultfontfeatures{Scale=MatchLowercase}
  \defaultfontfeatures[\rmfamily]{Ligatures=TeX,Scale=1}
\fi
% Use upquote if available, for straight quotes in verbatim environments
\IfFileExists{upquote.sty}{\usepackage{upquote}}{}
\IfFileExists{microtype.sty}{% use microtype if available
  \usepackage[]{microtype}
  \UseMicrotypeSet[protrusion]{basicmath} % disable protrusion for tt fonts
}{}
\makeatletter
\@ifundefined{KOMAClassName}{% if non-KOMA class
  \IfFileExists{parskip.sty}{%
    \usepackage{parskip}
  }{% else
    \setlength{\parindent}{0pt}
    \setlength{\parskip}{6pt plus 2pt minus 1pt}}
}{% if KOMA class
  \KOMAoptions{parskip=half}}
\makeatother
\usepackage{xcolor}
\IfFileExists{xurl.sty}{\usepackage{xurl}}{} % add URL line breaks if available
\IfFileExists{bookmark.sty}{\usepackage{bookmark}}{\usepackage{hyperref}}
\hypersetup{
  hidelinks,
  pdfcreator={LaTeX via pandoc}}
\urlstyle{same} % disable monospaced font for URLs
\setlength{\emergencystretch}{3em} % prevent overfull lines
\providecommand{\tightlist}{%
  \setlength{\itemsep}{0pt}\setlength{\parskip}{0pt}}
\setcounter{secnumdepth}{-\maxdimen} % remove section numbering

\date{}

\begin{document}

\section{Measure Theory}

\hypertarget{header-n0}{%
\subsubsection{Five Observation of Outer Measure}\label{header-n0}}

\textbf{Observation 1: Monotonicity}

if \(E_1 \subset E_2\), then \(m_{\*}(E_1)\leq m_{\*}(E_2)\).

This directly follows the conclusion that each covering of \(E_2\) also
covers \(E_1\).

\textbf{Obervation 2: Countable Sub-addictivity}

If \(E = \cup_{j=1}^{\infty}E_j\), then
\(m_{*}(E)\leq\cup_{j=1}^{\infty}m_{*}(E_j)\).

Let first assume all \(m_*(E_j)<\infty\), otherwise the equation above
obviously holds.

Then follow the definition of outer measure, construct a covering
\(\sum_{k=1}^{\infty}Q_{j,k}\) for each \(E_j\) such that:

\[\sum_{k=1}^{\infty}m_{*}(Q_{j,k}) < m_{*}(E_j) + \frac{\epsilon}{2^j}\]

Now \(\sum_{j=1}^{\infty}\sum_{k=1}^{\infty}Q_{j, k}\) is a covering of
\(E\) and:

\[m_{*}(E)\leq \sum_{j=1}^{\infty}\sum_{k=1}^{\infty}|Q_{j, k}|\leq\sum_{j=1}^{\infty}m_*(E_j)+\frac{\epsilon}{2^j}=\sum_{j=1}^{\infty}m_*(E_j)+\epsilon\]

Since the above equation holds for any arbitrary \(\epsilon\),
\(m_*(E)\leq\sum_{j=1}^{\infty}m_*(E_j)\).

\textbf{Observation 3}

If \(E \subset\mathbb{R}^d\), then \(m_*(E)=\mathrm{inf}m_*(O)\), where the
infimum is taken over all open sets \(O\) containing \(E\).

From the \emph{Observation 2}, it is obvious that
\(m_*(E)\leq \mathrm{inf}m_*(O)\). Therefore, it is sufficient to prove
the reverse inequality.

Let first construct a covering \(\sum_{j=1}^{\infty}Q_j\) of \(E\) such
that \(\sum_{j=1}^{\infty}|Q_j|\leq m_*(E)+\frac{\epsilon}{2}\).

Now, let \(Q_{j}^o\) denote an open set containing \(Q_j\) such that
\(m_*(Q_j^o)\leq m_*(Q_j)+\frac{\epsilon}{2^{j+1}} \) , and
\(O=\cup_{j=1}^{\infty}Q_{j}^o\) is open. From observation 2:

\[m_*(O)\leq \sum_{j=1}^{\infty}|Q_J^o|\leq\sum_{j=1}^{\infty}|Q_j|+\frac{\epsilon}{2^{{j+1}}}=\sum_{j=1}^{\infty}|Q_j|+\frac{\epsilon}{2}\leq m_*(E)+\epsilon\]

Since the above equation holds for any arbitrary \(\epsilon\),
\(\mathrm{inf}m_*(O)\leq m_*(O)\leq M_*(E)\).

\textbf{Follow-up Question}: why for every closed set \(Q_j\), we can
construct an open set \(Q_{j}^{o}\) such that
\(m_*(Q_j^o)\leq m_*(Q_j)+\frac{\epsilon}{2^{j+1}} \)?

\hypertarget{header-n25}{%
\subsubsection{Properties of Measurable Sets}\label{header-n25}}

\textbf{Property 2}

If \(m_*(E)=0\), then \(E\) is measurable. In particular, if \(F\) is a
subset of a set of exterior measure 0, then \(F\) is measurable.

By \textbf{Observation 3} of exterior measure, for each
\(\epsilon > 0\), there exists an open set with \(E \subset O\) and
\(m_*(O)\leq \epsilon\). Since \(O-E \subset O\), the monotonicity
implies \(m_*(O-E)\leq m_*(O)\leq \epsilon\). Therefore, \(E\) is
measurable.

\textbf{Property 3}

A countable union of measurable sets is measurable.

Suppose \(E=\cup_{i=1}^nE_i\) while each \(E_i\) is measurable. Then
given \(\epsilon>0\), construct \(O_i\) respectively so that
\(m_*(O_i-E_i)\leq \frac{\epsilon}{2^j}\). Obviously
\(O=\cup_{i=1}^nO_i\) is an open set and \(E\subset O\) and
\(O-E\subset \cup_{i=1}^n(O_i-E_i)\). Further,
\(m_*(O-E)\leq \sum_{i=1}^n(O_i-E_i)\frac{\epsilon}{2^j}=\epsilon\).
Proved.

\subsection{Measurable Function}
\subsubsection{Six Properties of Measurable Function}

\textbf{Property 1}: The finite-valued function \(f\) is measurable if and only if
\(f^{-1}(\mathcal{O})\) is measurable for every open set \(\mathcal{O}\), so is for
all closed set \(F\).

\textbf{Property 2}: (TBD)

\textbf{Property 3}: Suppose \(\{f_n\}_{n=1}^{\infty}\) is a sequence of measurable functions.
Then
\[\sup_n f_n(x), \quad \inf_n f_n(x), \quad\lim_{n\to\infty} sup, f_n(x) \quad\lim_{n\to\infty} inf f_n(x)\]

are all measurable.

\vspace{2mm}
\textbf{Theorem 4.1}
Suppose \(f\) is a non-negative measurable function on \(\mathbb{R}^d\),
then there exists an increasing sequence of non-negative simple functions
\(\{\varphi_k\}^{\infty}_{k=1}\) that converges pointwise to \(f\), namely
\[\{\varphi_k\}\leq \{\varphi_{k+1}\}\ and \lim_{k\to \infty}\varphi_k(x)=f(x), for\ all\ x\]

\textit{Proof}
For \(N\geq 1\), let \(Q_N\) denote the cube centered at the origin of side length
\(N\). Now define:
\begin{equation}
F_N(x)=
\left\{\begin{aligned}
  & f(x) \quad if\ x \in Q_n\ and\ f(x) \leq N \\ 
  & N \quad if\ x \in Q_n\ and\ f(x) > N \\
  & 0 \quad otherwise
\end{aligned}\right.
\end{equation}

Intuitively \(F_N(x)\to f(x)\) when \(N\) tends to \(\infty\). Now given two fixed number \(M, N\), construct a series of sets for \(l \in \mathbb{Z_+}\) and
\(0 \leq l < MN\):
\[
  E_{M, l} = \{x | x \in Q_n\ and\ \frac{l}{M} < F_N(x) \leq \frac{l+1}{M} \}
\]

And then construct simple functions:
\[
  F_{M, l}(x)=\sum_{l}\frac{l}{M}\chi_{E_{M, l}}(x)
\]

Obviously for each \(M\), \(F_N(x)\) could only be in one interval, namely:
\[
  F_{M, N}(x)=\frac{l'}{M}\quad for\ some\ l'
\]
Which also means \(F_N(x) - F_{M, N}(x) < \frac{1}{M}\) (the size of each interval).

Now let \(N = M = 2^k, k\in\mathbb{Z_+}\) and let series
\(\{\varphi_k(x)\}=F_{2^k, 2^k}\) being non-negative.
As \(k\to \infty\), \(F_{M, N}(x)\) uniformly converges to \(F_N(x)\)
(so does to \(f(x)\)).

Furthermore, assuming for \(M'=2^{k'}\), \(\frac{l'}{M'}<F_N(x)\leq\frac{l'+1}{M'}\),
for \(M''=2^{k'+1}\), obviously \(\frac{2*l'}{M''}<F_N(x)\), but \(F_N(x)\leq \frac{l'+1}{M''}\)
is not necessary since the size of interval \(\frac{1}{M''}\) is smaller. Hence
for \(M''=N''=2^{k'+1}\), \(\frac{l''}{M''}\geq \frac{2l'}{M''}=\frac{l'}{M'}\) and
\(F_{M'', N''}\geq F_{M', N'}\). \(\{\varphi_k(x)\}\) is increasing.

Overall, \(\varphi_k(x)\) satisfies all the desired properties.

\subsubsection{Egorov Theorem}
Suppose \(\{f_k\}_k^{\infty}\) is a sequence of measurable functions defined on a
measurable set \(E\) with \(m(E)<\infty\), and assume \(f_k \to f \) a.e on \(E\).
Given \(\epsilon > 0\), we can find a closed set \(A_{\epsilon}\subset E\) such that
\(m(E-A_{\epsilon})\leq \epsilon\) and \(f_k\to f\) uniformly on \(A_{\epsilon}\).

\textit{Proof.} Without loss of generality, assuming \(f_k\to f\) for every \(x\in E\).
Now construct a pair of two integers \(n\) and \(k\), so that:
\[E_k^n = \{x\in E: |f_j(x)-f(x)|<\frac{1}{n},\quad for\ all\ j>k\}\]
Fixing \(n\) and obviously \(E_k^n\subset E_{k+1}^n\). And \(E_k^n \to E\) when \(k\to \infty\).
By \textit{Corollary ()}, there exists \(k_n\) such that \(m(E-E_{k_n}^n)<\frac{1}{2^n}\).
Now:
\[|f_j(x)-f(x)|<\frac{1}{n}\]
when \(j>k_n\) and \(x\in E_{k_n}^n\)

Choosing \(N\) so that \(\sum_{n=N}^{\infty}2^{-n}<\frac{\epsilon}{2}\), and let:
\[A_{\epsilon}=\cap_{n\geq N}E_{k_n}^n\].

First \(m(E-A_{\epsilon})<\sum_{n=N}^{\infty}m(E-E_{k_n}^n)<\frac{\epsilon}{2}\).

Next, for \(\delta>0\), choose \(n\geq N\) such that \(\frac{1}{n}<\delta\), and note that \(x\in A_{\epsilon}\)
implies \(x\in E_{k_n}^n\). Therefore \(|f_j(x)-f(x)| < \delta\) whenever \(j > k_n\). \(f_j\to f\) uniformly on
\(A_{\epsilon}\).

Finally, by \textit{theorem ()}, choose a closed set \(A'_{\epsilon}\subset A_{\epsilon}\) with
\(m(A'_{\epsilon}-A_{\epsilon})<\frac{\epsilon}{2}\). This closed set meets all requirements. Proved.

\section{Integration Theory}

\subsection{Stage one: simple functions}
A simple function \(\varphi\) is a finite sum:
\[\varphi(x)=\sum_{k=1}^N a_k \chi_{E}(x)\]

A canonical form of \(\varphi\), which is unique is where \(a_k\)s are distinct and non-zero, while
the sets \(E_k\) are disjoint.

A straightforward process to find the canonical form is as following: since \(\varphi\) is a form of finite sum,
its values are finite. Suppose \(varphi\) takes \(M\) finite and non-zero value: \(c_1, \cdots, c_M\), and
set \(F_k=\{x: \varphi(x)=c_k\}\). Obviously \(F_k\) are disjoint, and \(\sum_{k=1}^Nc_k\chi_{F_k}\) meets all
requirements of the canonical form.

Now if \(\varphi\) is a simple function with the canonical form, Lebesgue integral is defined as:
\[\int_{\mathbb{R}^d}\varphi(x)dx=\sum_{k=1}^Mc_km(F_k)\]

\subsection{Stage two: Bounded non-negative functions}

\textbf{Bounded convergence theorem}

Suppose \(\{f_n\}\) is a sequence of measurable functions that are all bounded by \(M\), and supported
on a set \(E\) of finite measure. \(f_n\to f\) a.e.x when \(n\to\infty\). Then \(f\) is measurable,
bounded, supported on \(E\) for a.e.x, and

\[\int |f_n-f|\to 0\] when \(n\to\infty\)

\textit{Proof:} measurable, bounded and supported on \(E\) are obvious. For the last part: with
\textit{Egorov theorem}, there exists a measurable subset \(A_E\subset E\) with \(m(E-A_e)<\epsilon\) and
\(f_n\to f\) uniformly on \(A_E\). Now:

\[
  \begin{split}
    \lim_{n\to\infty}\int |f_n-f|&\leq \int_{A_E}|f_n-f|+\int_{E-A_E}|f_n-f|\\
    &\leq \epsilon m(E) + 2M\epsilon 
  \end{split}
\]

Since \(\epsilon\) could be arbitrary small, \(m(E)\) and \(M\) are finite, we get desired result.

\subsection{Stage three: Non-negative functions}
\textbf{Lemma 1.7 (Fatou)} Suppose \(\{f_n\}\) is a sequence of measurable functions with \(f_n \geq 0\). If 
\(\lim_{n\to\infty}f_n(x)\to f(x)\) for a.e. x, then:
\[f(x)\leq \lim_{n\to\infty}inf\int f_n\]

\textit{Proof:} suppose \(0\leq g(x) \leq f(x)\), where \(g_n(x)\) is bounded and supported on set \(E\)
of finite measure. Let \(g_n(x)=min(g(x), f_n(x))\), when \(n\to\infty\), since \(f_n(x)\to f(x)\) and \(g<f\),
\(g_n(x)\to g(x)\). As by construction, \(g_n(x)\) is bounded and supported on a set of finite measure, with \textit{bounded convergence theorem},
\(\int g_n(x)\to \int g(x)\). Again by construction, \(g_n(x)\leq f_n(x)\) so that \(\int g_n(x) \leq \int f_n(x)\). Therefore
\[
  \lim_{n\to\infty}\int g_n(x)=\int g(x) \leq \lim_{n\to\infty}\inf f_n
\]
Take the supremum over all \(g\) and by the definition of integral of non-negative measurable functions,
we can take the desired inequality.

\textbf{Corollary 1.8} suppose \(f\) is a non-negative measurable function, and \(\{f_n\}\) is a sequence
of non-negative measurable functions with \(f_n(x)\leq f(x)\) and \(f_n(x)\to f(x)\) for almost every \(x\). Then:
\[\lim_{n\to\infty}\int f_n = \int f\]

\textit{Proof:} since \(f_n(x)\leq f(x)\) for almost every \(x\), \(\int f_n(x)\leq \int f(x)\) all all \(n\). Therefore:
\[\lim_{n\to\infty}sup\int f_n(x)\leq\int f(x)\]

With \textit{Fatou lemma}, we get desired result.

\textit{Corollary 1.8} could lead to \textit{Monotone convergence theorem (corollary 1.9)}, which states: suppose
\(\{f_n\}\) is a sequence of non-negative measurable functions with \(f_n\nearrow f \) (monotonously increasing), then:
\[\lim_{n\to\infty}\int f_n(x)=\int f(x)\]

\textit{Corollary 1.10} Consider a series \(\sum_{k=1}^{\infty}a_k(x)\) where \(a_k(x) \geq 0\) is measurable for every \(k \geq 1\). Then:
\[\int \sum_{k=1}^{\infty}a_k(x)dx=\sum_{k=1}^{\infty}\int a_k(x)dx\]

\textit{Proof:} let \(f_n(x)=\sum_{k=1}^{n}a_k(x)\) and \(f(x)=\sum_{k=1}^{\infty}a_k(x)\). Obviously \(f_n(x)\), as finite sum, is measurable
and \(f_n(x)\leq f_{n+1}(x)\). And \(f_n(x)\to f(x)\) when  \(n\to\infty\). By \textit{monotone convergence theorem},
\(\int \sum_{k=1}^na_k(x)dx\to \int \sum_{k=1}^{\infty}a_k(x)dx\) as \(n\to\infty\). Since \(\int \sum_{k=1}^na_k(x)dx=\sum_{k=1}^n\int a_k(x)dx\),
we get desired result.

\subsection{Stage four: general case}
For general case, namely when \(f\) is any real-valued measurable function on \(\mathbb{R}^d\).
\(f\) is said Lebesgue Integrable when the non-negative measurable function \(|f|\) is integrable
(See stage three).

\textbf{Proposition 1.12:} suppose \(f\) is integrable on \(\mathbb{R}^d\). Then for every \(\epsilon > 0\),
i) there exists a set of finite measure \(B\) such that
\[\int_{B^c}|f|<\epsilon\]

\textit{Proof:}
Without loss of generality, we assume \(f\) is non-negative. Suppose \(B_N\) is a ball centered at origin and of radius 
\(N\) and \(F_N(x) = f(x)\chi_{B_N}(x)\). Obviously \(f_N\) is measurable, \(f_N \leq f_{n+1}\)
,\(f_n \to f\) when \(n \to \infty\). By monotone convergence theorem, we have:
\[\lim_{N\to\infty}\int f_N=\int f\]. In other word, for any \(\epsilon > 0\), there exists a \(N\),
leads to \(0 \leq \int f - \int f\chi_{B_N} < \epsilon\). Since \(1-\chi_{B_N}=\chi_{B_N^c}\), it implies
that \(\int_{B_N^c}f < \epsilon\). Proved.

ii) there is a \(\delta > 0 \) such that
\[\int_E|f|<\epsilon\quad whenever\; m(E)<\delta\] 

\textit{Proof:}
Again assuming \(f > 0 \). Let \(f_N(x)=f(x)\chi_{E_N}\) where:
\[E_N=\{x: f(x)<N\}\]

\(f_N\) is measurable, \(f_N \leq f_{N+1}\), and given \(\epsilon>0\), there exists \(N\), so that:

\[\int f - f_N < \frac{\epsilon}{2}\]

Choose \(\delta > 0\) so that \(N\delta < \frac{\epsilon}{2}\). Now if \(m(E)<\delta\):
\[
  \begin{split}
  \int_E f &= \int_E(f-f_N)+\int_E(F_N)\\
  &\leq f (f - f_N) + f_E(f_N)\\
  &\leq \frac{\epsilon}{2}+\delta N\\
  &\leq \frac{\epsilon}{2}+\frac{\epsilon}{2}\\
  &=\epsilon
  \end{split}
  \]
Proved.

\textbf{Theorem 1.13} Suppose \(\{f_n\}\) is a sequence of measurable functions such that
\(f_n\to f\) \textit{a.e.x}, as \(n\to \infty\). If \(|f_n(x)|<g(x)\), where \(g\) is integrable,
then:
\[\int |f_n-f|\to 0 \quad n\to \infty\]
and consequently:
\[\int f_n \to \int f \quad n\to \infty\]

\textit{Proof} suppose \(E_N=\{x: |x|\leq N,\; g(x)\leq N\}\). Given \(\epsilon > 0\), there exists
\(N\) so that \(\int_{E_N^\epsilon}g < \epsilon\) (\textit{proposition 1.12}). Also, functions \(f_n\chi_{E_N}\)
are bounded (by \(N\)) and supported on a set of finite measure, so that by bounded convergence theorem:
\[\int_{E_N} |f_n - f| < \epsilon \] when \(n\) is larger for some \(N\). Now there exisits a big \(N\):
\[
  \begin{split}
    \int |f_n-f| &= \int_{E_N} |f_n-f| + \int_{E_N^c} |f_n-f|\\
    &\leq \epsilon + 2\int_{E_N^c}g\\
    &=3\epsilon
  \end{split}
\]

\end{document}
